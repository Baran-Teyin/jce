/* eslint-disable dot-notation */
/* global jQuery, Joomla */
(function ($) {
    $(document).ready(function ($) {
        // process media input wrapper
        $('.wf-media-input').removeAttr('readonly').parents('.field-media-wrapper, .fc-field-value-properties-box').addClass('wf-media-wrapper');

        // remove modal heading
        $('.wf-media-wrapper .modal-header h3').html('&nbsp;');

        $('.wf-media-wrapper').find('button.button-select').on('click', function (e) {
            e.preventDefault();
        });

        // nasty fix for Joomla 5.1 media dialog
        $(document).on('joomla-dialog:open', function (e) {
            var target = e.target;

            if($(target).hasClass('joomla-dialog-media-field')) {
                var ifr = target.querySelector('iframe');

                if (ifr && ifr.src.indexOf('index.php?option=com_jce') != -1) {
                    $(target).addClass('wf-media-dialog');
                }
            }
        });
    });
})(jQuery);